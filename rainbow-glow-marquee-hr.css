/* Obsidian 彩虹辉光跑马灯分割线 - 真实辉光版本 */


/* ========== 可调节变量 ========== */
:root {
    --hr-line-width: 2px;           /* 核心线条粗细 */
    --hr-glow-width: 6px;           /* 辉光层宽度 */
    --hr-glow-width-dark: 10px;     /* 暗色主题辉光宽度 */
    --hr-glow-width-hover: 12px;    /* 悬停时辉光宽度 */
    --hr-container-height: 30px;    /* 容器高度 */
    --hr-animation-speed: 16s;      /* 动画速度 */
}
/* ================================ */

.markdown-rendered hr,
.markdown-source-view hr {
    border: none;
    height: var(--hr-container-height);
    background: transparent;
    margin: 30px 0;
    position: relative;
    overflow: visible;
}

/* 核心线条 */
.markdown-rendered hr::before,
.markdown-source-view hr::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 100%;
    height: var(--hr-line-width);
    background: repeating-linear-gradient(
        90deg,
        #ff0000 0px, #ff0000 8px, transparent 8px, transparent 16px,
        #ff4000 16px, #ff4000 24px, transparent 24px, transparent 32px,
        #ff8000 32px, #ff8000 40px, transparent 40px, transparent 48px,
        #ffbf00 48px, #ffbf00 56px, transparent 56px, transparent 64px,
        #ffff00 64px, #ffff00 72px, transparent 72px, transparent 80px,
        #80ff00 80px, #80ff00 88px, transparent 88px, transparent 96px,
        #00ff00 96px, #00ff00 104px, transparent 104px, transparent 112px,
        #00ff80 112px, #00ff80 120px, transparent 120px, transparent 128px,
        #00ffff 128px, #00ffff 136px, transparent 136px, transparent 144px,
        #0080ff 144px, #0080ff 152px, transparent 152px, transparent 160px,
        #0000ff 160px, #0000ff 168px, transparent 168px, transparent 176px,
        #8000ff 176px, #8000ff 184px, transparent 184px, transparent 192px,
        #ff00ff 192px, #ff00ff 200px, transparent 200px, transparent 208px,
        #ff0080 208px, #ff0080 216px, transparent 216px, transparent 224px
    );
    background-size: 224px 100%;
    animation: rainbowMarquee var(--hr-animation-speed) linear infinite;
    z-index: 2;
}

/* 辉光层1 - 最内层 */
.markdown-rendered hr::after,
.markdown-source-view hr::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 100%;
    height: var(--hr-glow-width);
    background: repeating-linear-gradient(
        90deg,
        #ff0000 0px, #ff0000 8px, transparent 8px, transparent 16px,
        #ff4000 16px, #ff4000 24px, transparent 24px, transparent 32px,
        #ff8000 32px, #ff8000 40px, transparent 40px, transparent 48px,
        #ffbf00 48px, #ffbf00 56px, transparent 56px, transparent 64px,
        #ffff00 64px, #ffff00 72px, transparent 72px, transparent 80px,
        #80ff00 80px, #80ff00 88px, transparent 88px, transparent 96px,
        #00ff00 96px, #00ff00 104px, transparent 104px, transparent 112px,
        #00ff80 112px, #00ff80 120px, transparent 120px, transparent 128px,
        #00ffff 128px, #00ffff 136px, transparent 136px, transparent 144px,
        #0080ff 144px, #0080ff 152px, transparent 152px, transparent 160px,
        #0000ff 160px, #0000ff 168px, transparent 168px, transparent 176px,
        #8000ff 176px, #8000ff 184px, transparent 184px, transparent 192px,
        #ff00ff 192px, #ff00ff 200px, transparent 200px, transparent 208px,
        #ff0080 208px, #ff0080 216px, transparent 216px, transparent 224px
    );
    background-size: 224px 100%;
    animation: rainbowMarquee var(--hr-animation-speed) linear infinite, glowPulse 3s ease-in-out infinite;
    filter: blur(4px);
    opacity: 0.8;
    z-index: 1;
}

/* 使用阴影创建额外的辉光层 */
.markdown-rendered hr,
.markdown-source-view hr {
    filter: drop-shadow(0 0 10px rgba(255, 100, 100, 0.5))
            drop-shadow(0 0 20px rgba(100, 255, 100, 0.4))
            drop-shadow(0 0 30px rgba(100, 100, 255, 0.3));
}

@keyframes rainbowMarquee {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 224px 0;
    }
}

@keyframes glowPulse {
    0%, 100% {
        filter: blur(4px);
        opacity: 0.8;
    }
    50% {
        filter: blur(8px);
        opacity: 1;
    }
}

/* 暗色主题增强效果 */
.theme-dark .markdown-rendered hr,
.theme-dark .markdown-source-view hr {
    filter: drop-shadow(0 0 15px rgba(255, 100, 100, 0.7))
            drop-shadow(0 0 25px rgba(100, 255, 100, 0.6))
            drop-shadow(0 0 35px rgba(100, 100, 255, 0.5));
}

.theme-dark .markdown-rendered hr::after,
.theme-dark .markdown-source-view hr::after {
    height: var(--hr-glow-width-dark);
}

/* 亮色主题柔和效果 */
.theme-light .markdown-rendered hr,
.theme-light .markdown-source-view hr {
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.2));
}

.theme-light .markdown-rendered hr::after,
.theme-light .markdown-source-view hr::after {
    opacity: 0.5;
    filter: blur(3px);
}

/* 悬停超强辉光 */
.markdown-rendered hr:hover,
.markdown-source-view hr:hover {
    filter: drop-shadow(0 0 20px rgba(255, 100, 100, 0.9))
            drop-shadow(0 0 35px rgba(100, 255, 100, 0.8))
            drop-shadow(0 0 50px rgba(100, 100, 255, 0.7));
}

.markdown-rendered hr:hover::before,
.markdown-source-view hr:hover::before {
    animation-duration: calc(var(--hr-animation-speed) / 2);
}

.markdown-rendered hr:hover::after,
.markdown-source-view hr:hover::after {
    animation-duration: calc(var(--hr-animation-speed) / 2), 3s;
    filter: blur(12px);
    height: var(--hr-glow-width-hover);
}

/* 性能优化 */
.markdown-rendered hr::before,
.markdown-rendered hr::after,
.markdown-source-view hr::before,
.markdown-source-view hr::after {
    will-change: background-position;
}